# Система авторизации Python Course

## Что было добавлено

### Бэкенд
1. **Модель User** (`backend/models.py`)
   - Поля: id, username, email, password_hash, is_admin, created_at
   - Методы для работы с паролями (хеширование и проверка)

2. **API авторизации** (`backend/routes/auth.py`)
   - `/api/auth/register` - регистрация пользователя
   - `/api/auth/login` - вход в систему
   - `/api/auth/logout` - выход из системы
   - `/api/auth/me` - получение информации о текущем пользователе
   - Декораторы `require_auth` и `require_admin` для защиты маршрутов

3. **Обновленные админские маршруты** (`backend/routes/admin.py`)
   - Все админские маршруты теперь требуют авторизации и прав администратора

4. **Тестовый администратор**
   - Логин: `admin_E`
   - Пароль: `admin041120`

### Фронтенд
1. **Страницы авторизации**
   - `/login` - страница входа
   - `/register` - страница регистрации
   - Красивый дизайн с градиентами и анимациями

2. **Страница админки** (`/admin`)
   - Статистика по курсу
   - Информация о тестах и их результатах
   - Быстрые действия для управления контентом

3. **Обновленный Layout**
   - Кнопки входа/выхода в навигации
   - Ссылка на админку для администраторов
   - Адаптивный дизайн для мобильных устройств

4. **Защищенные маршруты**
   - Компонент `ProtectedRoute` для защиты страниц
   - Автоматическое перенаправление неавторизованных пользователей

## Как запустить

### 1. Запуск бэкенда
```bash
cd backend
pip install -r requirements.txt
python app.py
```

### 2. Запуск фронтенда
```bash
cd frontend
npm install
npm start
```

### 3. Тестирование
1. Откройте http://localhost:3000
2. Нажмите "Войти" в навигации
3. Используйте тестовые данные:
   - Логин: `admin_E`
   - Пароль: `admin041120`
4. После входа вы будете перенаправлены в админку
5. Обычные пользователи после регистрации попадают на главную страницу

## Функциональность

### Для обычных пользователей
- Регистрация и вход в систему
- Доступ ко всем лекциям и тестам
- После входа перенаправление на главную страницу

### Для администраторов
- Доступ к панели администратора (`/admin`)
- Просмотр статистики по курсу
- Управление тестами и вопросами
- После входа перенаправление в админку

### Безопасность
- Пароли хешируются с помощью Werkzeug
- Сессии на основе Flask-Session
- Защищенные маршруты с проверкой прав
- CORS настроен для работы с фронтендом

## Структура файлов

### Новые файлы
- `backend/routes/auth.py` - API авторизации
- `frontend/src/pages/Login.js` - страница входа
- `frontend/src/pages/Login.css` - стили страницы входа
- `frontend/src/pages/Register.js` - страница регистрации
- `frontend/src/pages/Register.css` - стили страницы регистрации
- `frontend/src/pages/Admin.js` - страница админки
- `frontend/src/pages/Admin.css` - стили страницы админки
- `frontend/src/components/ProtectedRoute.js` - компонент защиты маршрутов

### Обновленные файлы
- `backend/models.py` - добавлена модель User
- `backend/routes/admin.py` - добавлена защита маршрутов
- `backend/app.py` - регистрация новых маршрутов
- `backend/seed_data.py` - создание тестового администратора
- `frontend/src/components/Layout.js` - добавлены кнопки авторизации
- `frontend/src/components/Layout.css` - стили для новых кнопок
- `frontend/src/App.js` - новые маршруты
- `frontend/src/services/api.js` - поддержка сессий

## API Endpoints

### Авторизация
- `POST /api/auth/register` - регистрация
- `POST /api/auth/login` - вход
- `POST /api/auth/logout` - выход
- `GET /api/auth/me` - информация о пользователе

### Админка (требует авторизации)
- `GET /api/admin/stats` - статистика
- `POST /api/admin/questions/<test_id>` - добавить вопрос
- `PUT /api/admin/questions/<question_id>` - обновить вопрос
- `DELETE /api/admin/questions/<question_id>` - удалить вопрос

